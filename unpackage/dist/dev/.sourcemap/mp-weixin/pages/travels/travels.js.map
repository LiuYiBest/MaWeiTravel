{"version":3,"sources":["uni-app:///main.js","webpack:///E:/MaWeiTravel发布版/MaWeiTravel/pages/travels/travels.vue?7217","webpack:///E:/MaWeiTravel发布版/MaWeiTravel/pages/travels/travels.vue?14c8","webpack:///E:/MaWeiTravel发布版/MaWeiTravel/pages/travels/travels.vue?02f9","webpack:///E:/MaWeiTravel发布版/MaWeiTravel/pages/travels/travels.vue?aa5e","uni-app:///pages/travels/travels.vue","webpack:///E:/MaWeiTravel发布版/MaWeiTravel/pages/travels/travels.vue?7ffd","webpack:///E:/MaWeiTravel发布版/MaWeiTravel/pages/travels/travels.vue?e35a"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,kG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACqC;;;AAG3F;AAC+M;AAC/M,gBAAgB,uNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAmzB,CAAgB,m0BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0Ev0B;AACA,gD;;;;;AAKA;AACA;AACA;AACA;AACA;AACA,kC;AACA;AACA,iBADA;AAEA,sDAFA;AAGA,MAHA,kBAGA;AACA;AACA,YADA;AAEA;AACA,oBADA;;AAGA;AACA,oBADA,EAHA;;AAMA;AACA,qBADA,EANA;;AASA;AACA,qBADA,EATA,CAFA;;;;AAgBA,yBAhBA;AAiBA,sBAjBA;AAkBA,qBAlBA,EAkBA;AACA,mBAnBA,EAmBA;AACA,kBApBA,EAoBA;AACA,gBArBA,EAqBA;AACA,gBAtBA,EAsBA;AACA,oBAvBA,EAuBA;AACA,mBAxBA,EAwBA;AACA,kBAzBA,EAyBA;AACA,gBA1BA,EA0BA;AACA;AACA,6BA5BA;AA6BA,mBA7BA;;AA+BA,GAnCA;AAoCA;AACA;AACA,WAFA,mBAEA,KAFA,EAEA,IAFA,EAEA;AACA;AACA;AACA;AACA,KANA;AAOA;AACA,aARA,uBAQA;AACA;AACA,gBADA,EACA;AACA,4CAFA,EAEA;AACA,6BAHA,EAGA;AACA;AACA,0FADA,CACA;AACA;;AAEA,SARA;;AAUA,KAnBA;AAoBA;AACA,aArBA,qBAqBA,KArBA,EAqBA;AACA;AACA;AACA;AACA,KAzBA;AA0BA;AACA,YA3BA,oBA2BA,KA3BA,EA2BA;AACA;AACA;AACA;AACA;AACA,UADA,CACA;AACA;AACA,OAHA;AAIA,WAJA,CAIA;AACA;AACA,OANA;AAOA,KAtCA;AAuCA;AACA,eAxCA,yBAwCA;AACA;AACA,oBADA;;AAGA;AACA,gBADA;AAEA,uCAFA;AAGA,uBAHA;;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA,OAVA;AAWA,WAXA,CAWA;AACA;AACA,OAbA;;AAeA,KA3DA;AA4DA;AACA,eA7DA,yBA6DA;AACA;AACA;AACA,KAhEA;;;AAmEA;AACA,WApEA,qBAoEA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KApFA;;AAsFA;AACA,YAvFA,sBAuFA;AACA;AACA;AACA,UADA,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAFA;;AAIA,SARA,MAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAvBA;AAwBA,WAxBA,CAwBA;AACA;AACA,OA1BA;AA2BA,KApHA;;AAsHA;AACA,YAvHA,sBAuHA;;AAEA,oCAFA,SAEA,SAFA;;;AAKA,sCALA,SAKA,WALA;;;AAQA,0DARA;AASA,KAhIA;;AAkIA;AACA,aAnIA,uBAmIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CADA;AAEA,yBAFA,CAEA;AAFA,aAGA,IAHA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAZA,EAYA,KAZA,CAYA;AACA;AACA,WAdA;AAeA,SAtBA;AAuBA,OAzBA;AA0BA,KAhKA;;;AAmKA;AACA,eApKA,yBAoKA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDADA;AAEA,mCAFA,CAEA;AAFA,aAGA,IAHA,CAGA;AACA;AACA;AACA,WANA;AAOA,eAPA,CAOA;AACA;AACA,WATA;AAUA;AACA,OAvBA;AAwBA,KA7LA;;AA+LA;AACA,aAhMA,qBAgMA,SAhMA,EAgMA,WAhMA,EAgMA;AACA;AACA,iCADA,EACA;AACA,iCAFA,EAEA;AACA,+BAHA,EAGA;AACA,4BAJA,EAIA;AACA,gCALA,EAKA;AACA,6BANA,EAMA;AACA,iCAPA,EAOA;AACA,+BARA,EAQA;AACA,2BATA;AAUA,kBAVA;;AAYA;AACA;AACA;AACA,yBADA,EAFA;;;AAMA,UANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCADA;;AAGA;AACA,SALA,EAKA,IALA;;AAOA,OAnBA;AAoBA,WApBA,CAoBA;AACA;AACA,OAtBA;AAuBA,KApOA;;AAsOA;AACA,UAvOA,kBAuOA,GAvOA,EAuOA;AACA;AACA,KAzOA,EApCA;;;AAgRA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,SAFA,mBAEA;AACA;AACA,KAJA,GArRA;;AA2RA;AACA,gBADA,wBACA,QADA,EACA,QADA,EACA;AACA;AACA;AACA,KAJA,EA3RA,E;;;;;;;;;;;;;ACtFA;AAAA;AAAA;AAAA;AAAirC,CAAgB,oqCAAG,EAAC,C;;;;;;;;;;;ACArsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/travels/travels.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/travels/travels.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./travels.vue?vue&type=template&id=3ce83c3a&scoped=true&\"\nvar renderjs\nimport script from \"./travels.vue?vue&type=script&lang=js&\"\nexport * from \"./travels.vue?vue&type=script&lang=js&\"\nimport style0 from \"./travels.vue?vue&type=style&index=0&id=3ce83c3a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ce83c3a\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/travels/travels.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./travels.vue?vue&type=template&id=3ce83c3a&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./travels.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./travels.vue?vue&type=script&lang=js&\"","<template>\n<view>\n\t<view class=\"travels\">\n\t\t<!-- 分类 -->\n\t\t<view class=\"classify-view\">\n\t\t\t<view class=\"classify-text\">分类</view>\n\t\t\t<block v-for=\"(item,index) in fication\" :key=\"index\">\n\t\t\t<view class=\"classify\">\n\t\t\t\t<text :class=\"{ activetext: index == num }\" @click=\"menubtn(index,item.name)\">{{item.name}}</text>\n\t\t\t</view>\n\t\t\t</block>\n\t\t</view>\n\t\t<!-- 标题 -->\n\t\t<view class=\"travels-title\">\n\t\t\t<input type=\"text\" placeholder=\"文章标题\" class=\"place-text\" v-model=\"titledata\"/>\n\t\t</view>\n\t\t<!-- 描述 -->\n\t\t<view class=\"travels-describe\">\n\t\t\t<textarea  placeholder=\"记录下你的旅行日记\" v-model=\"tipsdata\" maxlength='20000000'/>\n\t\t</view>\n\t</view>\n\t\n\t<!-- 上传图片 -->\n\t<view class=\"travels-image\">\n\t\t<view class=\"topimg\">\n\t\t\t<image src=\"cloud://xindemo-9gms6e168e9f811e.7869-xindemo-9gms6e168e9f811e-1304822355/userimage/图片.png\" mode=\"widthFix\" @click=\"uploadImg()\"></image>\r\n\t\t\t<!-- <view class=\"img-text\">上传图片</view> -->\n\t\t</view>\n\t\t<!-- 九宫格 -->\n\t\t<view class=\"conteng\">\n\t\t\t<block v-for=\"(item,index) in topimg\" :key=\"index\">\n\t\t\t<view class=\"conteng-img\">\n\t\t\t\t<image :src=\"item\" mode=\"aspectFill\" class=\"uploadimg\" @click=\"preImage(index)\"></image>\n\t\t\t\t<image src=\"cloud://xindemo-9gms6e168e9f811e.7869-xindemo-9gms6e168e9f811e-1304822355/userimage/删除.svg\" mode=\"widthFix\" class=\"deleteimg\" @click=\"deleteImg(index)\"></image>\n\t\t\t</view>\n\t\t\t</block>\n\t\t</view>\n\t</view>\n\t\n\t<!-- 上传视频 -->\n\t<view class=\"travels-video\">\n\t\t<view class=\"topimg1\">\n\t\t\t<image src=\"cloud://xindemo-9gms6e168e9f811e.7869-xindemo-9gms6e168e9f811e-1304822355/userimage/视频2.png\" mode=\"widthFix\" @click=\"uploadVideo()\"></image>\n\t\t</view>\n\t\t<view class=\"uploadvideo\" v-if=\"uploadvideos\">\r\n\t\t\t <!-- poster=\"http://h.thexxdd.cn/video/postimage.jpg\" -->\n\t\t\t<video :src=\"videos\" controls objectFit=\"cover\"></video>\n\t\t\t<image class=\"pause\" src=\"cloud://xindemo-9gms6e168e9f811e.7869-xindemo-9gms6e168e9f811e-1304822355/userimage/删除.svg\" @click=\"deleteVideo()\"></image>\n\t\t</view>\n\t</view>\n\t\n\t<!-- 为了能够练习代码  在上线的版本禁掉用户的发布功能 -->\n\t<!-- <view class=\"release\" @click=\"suBmitd()\">发布</view> -->\r\n\t<!-- 取消发布 -->\n\t<view class=\"release\">发布</view>\n\t<!-- 及时反馈组件 -->\n\t<HMmessages ref=\"HMmessages\" @complete=\"HMmessages = $refs.HMmessages\" @clickMessage=\"clickMessage\"></HMmessages>\n\t\n\t<!-- 登录模态框 -->\n\t<motal ref=\"mon\"></motal>\n\t<!-- 提示用户上传成功与否 -->\n\t<view class=\"warp\" v-if=\"relend\">\n\t\t<view class=\"warp-view tipmin\">\t\n\t\t\t<text>{{reldata}}</text>\n\t\t</view>\r\n\n\t</view>\n</view>\n\t\n\t\n</template>\n\n<script>\n\t// 引入预览图片  定位addressdata \n\timport {preview} from '../../common/list.js'\n\timport {mapState} from 'vuex'\n\t// 引入及时反馈组件\n\timport HMmessages from \"@/components/HM-messages/HM-messages.vue\"\n\t// 引入模态框\n\timport motal from '../../element/modal.vue'\n\t// 引入当前时间的js\n\tvar util = require('../../common/util.js');\n\tvar time = util.formatTime(new Date());\n\t// 定义数据库\n\tvar db = wx.cloud.database()\n\tvar users = db.collection('user')\n\texport default{\n\t\tname:'travels',\n\t\tcomponents: {HMmessages,motal},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tnum:0,\n\t\t\t\tfication: [{\r\n\t\t\t\t\t\t\"name\": '全部'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"name\": '公园'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"name\": '纪念馆'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"name\": '博物馆'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\n\n\t\t\t\tuploadvideos:false,\n\t\t\t\twatchaddress:'',\n\t\t\t\tclassdata:'全部',  //分类\n\t\t\t\ttitledata:'',   //标题\n\t\t\t\ttipsdata:'',   //描述\n\t\t\t\ttopimg:[],   //上传的图片\n\t\t\t\tvideos:'',  //上传的视频\n\t\t\t\taddress:'福州市', //选择的城市\n\t\t\t\tavatarUrl:'', // 用户头像\n\t\t\t\tnickName:'', // 用户昵称\n\t\t\t\topenid :''\t,// 用户openid\n\t\t\t\t// 提示用户正在发布\n\t\t\t\treldata:'正在发布中,请稍后...',\n\t\t\t\trelend:false\n\t\t\t}\n\t\t},\n\t\tmethods:{\r\n\t\t\t//获取景点\n\t\t\tmenubtn(index,name){\n\t\t\t\tthis.num = index\n\t\t\t\tconsole.log(name)\n\t\t\t\tthis.classdata  =name\n\t\t\t},\n\t\t\t// 上传图片\n\t\t\tuploadImg(){\n\t\t\t\tuni.chooseImage({\n\t\t\t\t    count: 9, //默认9\n\t\t\t\t    sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\t    sourceType: ['album'], //从相册选择\n\t\t\t\t    success: (res)=> {\n\t\t\t\t        console.log(...res.tempFilePaths);//展开数组的每一项\n\t\t\t\t\t\tthis.topimg.push(...res.tempFilePaths)\n\t\t\t\t\t\t\n\t\t\t\t    }\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 删除图片\n\t\t\tdeleteImg(index){\n\t\t\t\t// console.log(index)\n\t\t\t\tthis.topimg.splice(index,1)\n\t\t\t\t// console.log(this.topimg)\n\t\t\t},\n\t\t\t// 使用接口预览图片\n\t\t\tpreImage(index){\n\t\t\t\t// console.log(index)\n\t\t\t\t// 预览图片\n\t\t\t\tlet imglist = this.topimg\n\t\t\t\tpreview(index,imglist)\n\t\t\t\t.then((res)=>{\n\t\t\t\t\tconsole.log('预览成功')\n\t\t\t\t})\n\t\t\t\t.catch((err)=>{\n\t\t\t\t\tconsole.log('预览失败')\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 上传视频\n\t\t\tuploadVideo(){\n\t\t\t\tuni.showLoading({\n\t\t\t\t    title: '上传中'\n\t\t\t\t});\n\t\t\t\tuni.chooseVideo({\n\t\t\t\t\tcount: 1,\n\t\t\t\t\tsourceType: ['camera', 'album'],\n\t\t\t\t\tmaxDuration:20,\n\t\t\t\t})\n\t\t\t\t.then((res)=>{\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tthis.videos = res[1].tempFilePath\n\t\t\t\t\tthis.uploadvideos = true\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t})\n\t\t\t\t.catch((err)=>{\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t\t\n\t\t\t},\n\t\t\t// 删除视频\n\t\t\tdeleteVideo(){\n\t\t\t\tthis.videos = ''\n\t\t\t\tthis.uploadvideos = false\n\t\t\t},\n\t\t\t\n\n\t\t\t// 提交\n\t\t\tsuBmitd(){\r\n\t\t\t\t// this.HMmessages.show('标题必填',{icon:'success',background:'rgb(128, 191, 255)'})\n\t\t\t\tif(this.titledata == ''){\n\t\t\t\t\tlet tip = '标题必填'\n\t\t\t\t\tthis.proMpt(tip)\n\t\t\t\t}else if(this.tipsdata == ''){\n\t\t\t\t\tlet tip = '描述必填'\n\t\t\t\t\tthis.proMpt(tip)\n\t\t\t\t}else if(this.topimg.length < 1){\n\t\t\t\t\tlet tip = '请选择至少一张图片上传'\n\t\t\t\t\tthis.proMpt(tip)\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log('可以提交')\n\t\t\t\t\t// 判断用户是否登录，登录再提交\n\t\t\t\t\tthis.userinfo()\n\t\t\t\t}\n\t\t\t},\n\t\t\t\t\n\t\t\t// 判断用户是否登录\n\t\t\tuserinfo(){\n\t\t\t\t// 请求数据库查看用户是否存在，存在就是登陆，反之未登录\n\t\t\t\tusers.get()\n\t\t\t\t.then((res)=>{\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t// length == 0说明用户没有登录\n\t\t\t\t\tif(res.data.length == 0){\n\t\t\t\t\t\tconsole.log('没有登录')\n\t\t\t\t\t\t// 弹出模态框\n\t\t\t\t\t\tlet message = '请登录后再操作'\n\t\t\t\t\t\tthis.$nextTick(()=>{   //dom更新循环结束之后的延迟回调\n\t\t\t\t\t\t\tthis.$refs.mon.init(message)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('已经登陆')\n\t\t\t\t\t\t// 取到用户头像，昵称，openid\n\t\t\t\t\t\tlet usermen = res.data[0]\n\t\t\t\t\t\tthis.avatarUrl = usermen.avatarUrl\n\t\t\t\t\t\tthis.nickName = usermen.nickName\n\t\t\t\t\t\tthis.openid  = usermen._openid\n\t\t\t\t\t\t// 可以上传用户提交的数据到数据库\n\t\t\t\t\t\tthis.relend = true\n\t\t\t\t\t\tthis.userdata()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err)=>{\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 用户上传数据到数据库：1，await 先上传图片到云储存，2，await 上传视频到云储存，3，await 上传所有数据到数据库\n\t\t\tasync userdata(){\n\t\t\t\t// 先等待图片上传到云存储\n\t\t\t\tlet staticimg = await this.staticImg()\n\t\t\t\t// console.log(staticimg)\n\t\t\t\t// 等待视频上传到存储\n\t\t\t\tlet staticvideo = await this.staticVideo()\n\t\t\t\t// console.log(staticvideo)\n\t\t\t\t// 最后一步把用户填写的所有数据一并提交到数据库\n\t\t\t\tawait this.cloudData(staticimg,staticvideo)\n\t\t\t},\n\t\t\t\n\t\t\t// 先等待图片上传到云存储\n\t\t\tstaticImg(){\n\t\t\t\t// 把上传成功返回的图片放到数组里\n\t\t\t\tvar imgfileID = []\n\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\t// 取出图片数组里的每一项,forEach遍历类似for(i=0,)\n\t\t\t\t\tthis.topimg.forEach((img)=>{\n\t\t\t\t\t\t// console.log(img)\n\t\t\t\t\t\t// 随机字符串，拼接图片名称，防止同名文件产生，而被后一个覆盖前一个文件\n\t\t\t\t\t\tlet imgion = img.lastIndexOf('.')\n\t\t\t\t\t\tlet eximg = img.slice(imgion)\n\t\t\t\t\t\tlet cloudpath = `${Date.now()}-${Math.floor(Math.random(0,1) * 10000000)}${eximg}`\n\t\t\t\t\t\t// console.log(cloudpath)\n\t\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t\t  cloudPath: 'static/' + cloudpath,\n\t\t\t\t\t\t  filePath: img, // 文件路径\n\t\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\t  console.log('图片上传完成')\n\t\t\t\t\t\t  imgfileID.push(res.fileID)\n\t\t\t\t\t\t  // console.log(imgfileID)\n\t\t\t\t\t\t  // 判断云存储返回的图片是否和用户上传的图片一样多\n\t\t\t\t\t\t  if(imgfileID.length == this.topimg.length){\n\t\t\t\t\t\t\t  resolve(imgfileID)\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t  \n\t\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t\t})\n\t\t\t\t\t}) \n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t\n\t\t\t// 先等待视频上传到云存储\n\t\t\tstaticVideo(){\n\t\t\t\treturn new Promise((resolve,reject)=>{\n\t\t\t\t\t// 用户是否要上传视频\n\t\t\t\t\tif(this.videos == ''){\n\t\t\t\t\t\tconsole.log('用户不上传')\n\t\t\t\t\t\tresolve('')\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.log('要上传')\n\t\t\t\t\t\t// 随机字符串，拼接图片名称，防止同名文件产生，而被后一个覆盖前一个文件\n\t\t\t\t\t\tlet videoion = this.videos.lastIndexOf('.')\n\t\t\t\t\t\tlet exvideo = this.videos.slice(videoion)\n\t\t\t\t\t\tlet cloudpath = `${Date.now()}-${Math.floor(Math.random(0,1) * 10000000)}${exvideo}`\n\t\t\t\t\t\t// console.log(cloudpath)\n\t\t\t\t\t\twx.cloud.uploadFile({\n\t\t\t\t\t\t\tcloudPath: 'staticvideo/' + cloudpath,\n\t\t\t\t\t\t\tfilePath: this.videos, // 文件路径\n\t\t\t\t\t\t}).then((res)=>{\n\t\t\t\t\t\t\tconsole.log('视频上传完毕')\n\t\t\t\t\t\t\tresolve(res.fileID)\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((err)=>{\n\t\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 最后一步把用户填写的所有数据一并提交到数据库\n\t\t\tcloudData(staticimg,staticvideo){\n\t\t\t\tlet datas = {\n\t\t\t\t\tclassdata:this.classdata,  //分类\n\t\t\t\t\ttitledata:this.titledata, //标题\n\t\t\t\t\ttipsdata:this.tipsdata,  // 描述\n\t\t\t\t\tstaticimg:staticimg,   //图片\n\t\t\t\t\tstaticvideo:staticvideo,  //视频\n\t\t\t\t\taddress:this.address,   //定位\n\t\t\t\t\tavatarUrl:this.avatarUrl,  //头像\n\t\t\t\t\tnickName:this.nickName,   //昵称\n\t\t\t\t\topenid:this.openid,\n\t\t\t\t\ttime:time\n\t\t\t\t}\n\t\t\t\tdb.collection('userdata').add({\n\t\t\t\t\t// data里面表示要上传的数据\n\t\t\t\t\tdata:{\n\t\t\t\t\t\tdatainfo:datas\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((res)=>{\n\t\t\t\t\t// console.log(res)\n\t\t\t\t\t// 提示用户发布成功，跳转到攻略页面\n\t\t\t\t\tthis.reldata = '成功发布√'\n\t\t\t\t\t// 用户发表景点成功，传值给攻略页面让攻略页面再次请求数据\n\t\t\t\t\tlet pagesid = true\n\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\tuni.switchTab({ \n\t\t\t\t\t\t\turl:'../strategy/strategy'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('roturnmuta',pagesid)\n\t\t\t\t\t},1700)\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.catch((err)=>{\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t\t// 及时反馈\n\t\t\tproMpt(tip){\n\t\t\t\tthis.HMmessages.show(tip,{icon:'error',iconColor:'#ffffff',fontColor:'#ffffff', background:\"rgb(102, 178, 255)\"})\n\t\t\t}\n\t\t\t\n\t\t},\n\t\t// created() {\n\t\t// \t// 定位\n\t\t// \tthis.addRess()\n\t\t// },\n\t\t// 计算属性\n\t\tcomputed:{\n\t\t\t...mapState(['travecity']),\n\t\t\tcount(){\n\t\t\t\tthis.watchaddress = this.travecity.traveing\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\twatchaddress(newValue,oldValue){\n\t\t\t\tconsole.log(newValue)\n\t\t\t\tthis.address = newValue\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\r\n\t/* \t.chengong-imge{\r\n\t\t\tjustify-content: center;\r\n\t\t\t/* padding-right: ;\r\n\t\t\tpadding-bottom: 100upx;\r\n\t\t\tpadding-left: 100upx;\r\n\t\t\tpadding-top: 100upx; */\r\n\t\t\t/* margin: auto; \r\n\t\t\t/* margin-bottom: 85upx;\t\r\n\t\t\twidth: 100upx;\r\n\t\t\theight: 100upx;\t\r\n\t\t} */\n\t\t.img-text{\r\n\t\t\tcolor: #b3b3b3;\r\n\t\t\tfont-size: 30upx;\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\t\t.video-text{\r\n\t\t\tcolor: #b3b3b3;\r\n\t\t\tfont-size: 30upx;\r\n\t\t\t/* padding: 15upx 0 0; */\r\n\t\t\t/* display: flex; */\r\n\t\t\t}\r\n\t\t.travels {\r\n\t\t\tpadding: 10upx 20upx;\t\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t\t.classify text {\r\n\t\t\tdisplay: block;\r\n\t\t\tfont-size: 27upx;\r\n\t\t\tcolor: #14181e;\r\n\t\t\tbackground: #f7f7f7;\r\n\t\t\tpadding: 10upx 20upx;\r\n\t\t\tborder-radius: 20upx;\r\n\t\t\tmargin: 0 30upx;\r\n\t\t}\r\n\t\r\n\t\t.classify {\r\n\t\t\tdisplay: flex;\r\n\t\t}\r\n\t\r\n\t\t.classify-text {\r\n\t\t\tfont-size: 30upx;\r\n\t\t\tcolor: #14181e;\r\n\t\t\tfont-weight: bold;\r\n\t\t}\r\n\t\r\n\t\t.classify-view {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\t\r\n\t\t/* 选中的样式 */\r\n\t\t.activetext {\r\n\t\t\tbackground: #66d9ff !important;\r\n\t\t}\r\n\t\r\n\t\t/* 标题 */\r\n\t\t.place-text {\r\n\t\t\tcolor: #808080 !important;\r\n\t\t\tfont-size: 30upx;\r\n\t\t}\r\n\t\r\n\t\t.travels-title {\r\n\t\t\tmargin: 40upx 0;\r\n\t\t}\r\n\t\r\n\t\t/* 描述 */\r\n\t\t.travels-describe textarea {\r\n\t\t\twidth: 100%;\r\n\t\t\tcolor: #808080 !important;\r\n\t\t\tfont-size: 30upx;\r\n\t\t}\r\n\t\r\n\t\t/* 上传图片 */\r\n\t\t.topimg image {\r\n\t\t\twidth: 100upx;\r\n\t\t\theight: 100upx;\r\n\t\t\t/* margin-bottom: 90upx;\t */\r\n\t\t}\r\n\t\r\n\t\t.topimg {\r\n\t\t\tpadding-left: 30upx;\r\n\t\t\tpadding-top: 10upx;\r\n\t\t\tmargin: auto;\r\n\t\t\r\n\t\t}\r\n\t\t/* 上传视频 */\r\n\t\t.topimg1 image {\r\n\t\t\twidth: 100upx;\r\n\t\t\theight: 100upx;\t\r\n\t\t}\r\n\t\t.topimg1 {\r\n\t\t\tpadding-left: 30upx;\r\n\t\t\tpadding-top: 10upx;\r\n\t\t\t/* margin: auto; */\r\n\t\t\tmargin-bottom: 85upx;\t\r\n\t\t\r\n\t\t}\r\n\t\t\t\r\n\t\r\n\t\t/* 九宫格 */\r\n\t\t.conteng {\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-wrap: wrap;\r\n\t\t\tmargin-left: 4px;\r\n\t\t\tmargin-right: 4px;\r\n\t\t}\r\n\t\r\n\t\t.conteng-img {\r\n\t\t\twidth: calc((100% / 3) - 8px) !important;\r\n\t\t\tmargin: 4px;\r\n\t\t\theight: 176upx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\t\r\n\t\t.uploadimg {\r\n\t\t\twidth: 100% !important;\r\n\t\t\theight: 100% !important;\r\n\t\t\tborder-radius: 10upx;\r\n\t\t}\r\n\t\r\n\t\t/* 删除图片 */\r\n\t\t.deleteimg {\r\n\t\t\twidth: 50upx;\r\n\t\t\theight: 40upx;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 6upx;\r\n\t\t\tright: 6upx;\r\n\t\t}\r\n\t\r\n\t\t/* 视频 */\r\n\t\t.uploadvideo video {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 400upx;\r\n\t\t\tborder-radius: 5upx;\r\n\t\t\tmargin-bottom: 100upx;\r\n\t\t}\r\n\t\r\n\t\t.uploadvideo {\r\n\t\t\tmargin: 0 8px;\r\n\t\t\tborder-radius: 5upx;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\t\r\n\t\t/* 覆盖视频 */\r\n\t\t.pause {\r\n\t\t\twidth: 50upx;\r\n\t\t\theight: 50upx;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 6upx;\r\n\t\t\tright: 6upx;\r\n\t\t}\r\n\t\t/* 位置 */\r\n\t\t.address-site{display: flex; align-items: center;}\r\n\t\t.address-site image{width: 40upx; height: 40upx; margin-right: 10upx;}\r\n\t\t.address-site text{font-size: 30upx; color: #00a2ff;}\r\n\t\t.address-text{font-size: 30upx; color: #333333; padding-right: 40upx;}\r\n\t\t.address{display: flex; background: #f1f1f1; padding: 20upx 0 20upx 20upx; margin-top: 30upx;\r\n\t\t\t\tmargin-bottom: 160upx;}\r\n\t\r\n\t\t/* 发布 */\r\n\t\t.release {\r\n\t\t\tbackground: #0099ff;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100upx;\r\n\t\t\tfont-size: 40upx;\r\n\t\t\tline-height: 100upx;\r\n\t\t\ttext-align: center;\r\n\t\t\tposition: fixed;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\tz-index: 999;\r\n\t\t}\r\n\t\r\n\t\t/* 提示用户上传成功与否 */\r\n\t\t.warp {\r\n\t\t\tposition: fixed;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\ttop: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\t\tz-index: 9999;\r\n\t\t}\r\n\t\r\n\t\t.warp-view {\r\n\t\t\twidth: 500upx;\r\n\t\t\theight: 200upx;\r\n\t\t\tbackground: #f2f2f2;\r\n\t\t\tmargin: auto;\r\n\t\t\tposition: absolute;\r\n\t\t\t-webkit-position: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tbottom: 0;\r\n\t\t\tright: 0;\r\n\t\t\tborder-radius: 8upx;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t\r\n\t\t/* 提示框 */\r\n\t\t.tipmin text {\r\n\t\t\tfont-size: 34upx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\tline-height: 200upx;\r\n\t\t}\n</style>\n","import mod from \"-!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./travels.vue?vue&type=style&index=0&id=3ce83c3a&scoped=true&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilder\\\\HBuilderX.3.1.22.20210709.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./travels.vue?vue&type=style&index=0&id=3ce83c3a&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1632664185526\n      var cssReload = require(\"D:/HBuilder/HBuilderX.3.1.22.20210709.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}