<view class="all"><view class="bar"><view data-event-opts="{{[['tap',[['handleCalendar',[0]]]]]}}" class="previous" bindtap="__e"><block wx:if="{{langType=='ch'}}"><button class="barbtn">上一月</button></block><block wx:else><button class="barbtn">Last</button></block></view><view class="date">{{(cur_year||"--")+" 年 "+(cur_month||"--")+" 月"}}</view><view data-event-opts="{{[['tap',[['handleCalendar',[1]]]]]}}" class="next" bindtap="__e"><block wx:if="{{langType=='ch'}}"><button class="barbtn">下一月</button></block><block wx:else><button class="barbtn">Next</button></block></view></view><block wx:if="{{langType=='ch'}}"><view class="week"><block wx:for="{{weeks_ch}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view>{{item}}</view></block></view></block><block wx:else><view class="week"><block wx:for="{{weeks_en}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view>{{item}}</view></block></view></block><view class="myDateTable"><block wx:for="{{days}}" wx:for-item="item" wx:for-index="j" wx:key="j"><view class="dateCell"><block wx:if="{{item.date==undefined||item.date==null}}"><view class="cell"><text decode="{{true}}"></text></view></block><block wx:else><view><block wx:if="{{item.isSign==true}}"><view class="cell greenColor bgWhite  "><text>{{item.date}}</text></view></block><block wx:else><block wx:if="{{cur_year<toYear||cur_year==toYear&&cur_month<toMonth||cur_year==toYear&&cur_month==toMonth&&item.date<today}}"><view data-event-opts="{{[['tap',[['clickSignUp',['$0',0],[[['days','',j,'date']]]]]]]}}" class="cell redColor bgGray" bindtap="__e"><text>{{item.date}}</text></view></block><block wx:else><block wx:if="{{item.date==today&&cur_month==toMonth&&cur_year==toYear}}"><view data-event-opts="{{[['tap',[['clickSignUp',['$0',1],[[['days','',j,'date']]]]]]]}}" class="cell whiteColor bgBlue" bindtap="__e"><text>签到</text></view></block><block wx:else><view class="whiteColor cell"><text>{{item.date}}</text></view></block></block></block></view></block></view></block></view></view>